import { createSlug } from '../../utils/slugs';

export async function getStaticPaths() {
  try {
    // Hardcoded jobs data for debugging
    const jobs = [
      {
        id: '1',
        title: 'Test Job Alpha',
        company: 'Debug Corp',
        // Add other fields required by createSlug or props if any, minimally
      },
      {
        id: '2',
        title: 'Another Test Listing',
        company: 'Test Inc',
      }
    ];

    return jobs.map((job) => {
      const jobTitleSlug = createSlug(job.title);
      const companyNameSlug = createSlug(job.company);
      const slug = `${jobTitleSlug}-${companyNameSlug}-${job.id}`;
      return {
        params: { slug: slug },
        props: { job }, // Pass the minimal job object
      };
    });
  } catch (error) {
    console.error("Error in getStaticPaths (with minimal hardcoded data):", error);
    return [];
  }
}

const { job } = Astro.props;

// No complex destructuring, no redirect for now
// No date formatting
---
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{job?.title || 'Job Page'}</title>
</head>
<body>
  <main>
    <h1>{job?.title || 'Job Title Not Found'}</h1>
    <p>This is a drastically simplified job detail page for debugging.</p>
    <p>Job ID: {job?.id}</p>
    <a href="/">Back to Listings (if index page works)</a>
  </main>
</body>
</html>
<!-- All style tags removed --> 